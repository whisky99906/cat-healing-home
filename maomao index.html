<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>çŒ«çŒ«æ²»æ„ˆæ‰€ï½œä½ çš„å…¨èƒ½æš–å¿ƒä¼™ä¼´</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Comic Sans MS', 'Segoe UI', 'PingFang SC', sans-serif;
        }
        
        :root {
            --cat-beige: #fff5e6;
            --cat-orange: #ffb347;
            --cat-pink: #ffb6c1;
            --cat-green: #4CAF50;
            --cat-blue: #4a6bff;
            --cat-brown: #8b4513;
            --cat-grey: #d3d3d3;
            --text-warm: #5d4037;
        }
        
        body {
            background: linear-gradient(135deg, var(--cat-beige) 0%, #fff0f5 100%);
            min-height: 100vh;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }
        
        /* æµ®åŠ¨å°çŒ« */
        .floating-cat {
            position: absolute;
            opacity: 0.3;
            z-index: 0;
        }
        
        .cat-1 { top: 10%; left: 5%; width: 60px; animation: float 20s infinite linear; }
        .cat-2 { top: 20%; right: 8%; width: 40px; animation: float 25s infinite linear reverse; }
        .cat-3 { bottom: 15%; left: 10%; width: 50px; animation: float 18s infinite linear; }
        .cat-4 { bottom: 25%; right: 15%; width: 45px; animation: float 22s infinite linear reverse; }
        
        @keyframes float {
            0% { transform: translateY(0px) rotate(0deg); }
            25% { transform: translateY(-20px) rotate(5deg); }
            50% { transform: translateY(0px) rotate(0deg); }
            75% { transform: translateY(20px) rotate(-5deg); }
            100% { transform: translateY(0px) rotate(0deg); }
        }
        
        /* çŒ«çˆªå° */
        .paw-print {
            position: absolute;
            opacity: 0.1;
            font-size: 40px;
        }
        
        .container {
            max-width: 500px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }
        
        .header {
            text-align: center;
            padding: 20px 0 30px;
        }
        
        .cat-title {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 10px;
        }
        
        .cat-icon {
            font-size: 3rem;
            color: var(--cat-orange);
        }
        
        h1 {
            font-size: 2.5rem;
            color: var(--cat-brown);
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        
        .subtitle {
            color: var(--cat-brown);
            font-size: 1.2rem;
            opacity: 0.8;
        }
        
        /* å¡ç‰‡æ ·å¼ */
        .card {
            background: white;
            border-radius: 25px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(255, 182, 193, 0.2);
            border: 3px dashed var(--cat-pink);
            position: relative;
            overflow: hidden;
        }
        
        .card::before {
            content: "ğŸ¾";
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 2rem;
            opacity: 0.3;
        }
        
        .card-title {
            color: var(--cat-orange);
            font-size: 1.5rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        /* è¾“å…¥æ¡† */
        .cat-input {
            width: 100%;
            padding: 20px;
            border: 3px solid var(--cat-beige);
            border-radius: 20px;
            font-size: 1.2rem;
            background: rgba(255, 255, 255, 0.9);
            color: var(--text-warm);
            resize: none;
            transition: all 0.3s;
        }
        
        .cat-input:focus {
            outline: none;
            border-color: var(--cat-orange);
            box-shadow: 0 0 0 4px rgba(255, 179, 71, 0.2);
        }
        
        /* æŒ‰é’® */
        .cat-btn {
            background: linear-gradient(135deg, var(--cat-orange), #ff8c00);
            color: white;
            border: none;
            padding: 20px 30px;
            border-radius: 20px;
            font-size: 1.3rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            width: 100%;
            margin-top: 20px;
        }
        
        .cat-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(255, 140, 0, 0.3);
        }
        
        .cat-btn:active {
            transform: translateY(-1px);
        }
        
        .btn-pink {
            background: linear-gradient(135deg, var(--cat-pink), #ff8ab3);
        }
        
        .btn-green {
            background: linear-gradient(135deg, var(--cat-green), #66bb6a);
        }
        
        .btn-blue {
            background: linear-gradient(135deg, var(--cat-blue), #6d8cff);
        }
        
        .btn-grey {
            background: linear-gradient(135deg, var(--cat-grey), #a0a0a0);
        }
        
        /* åŸå› é€‰æ‹© */
        .reason-selector {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin: 20px 0;
        }
        
        .reason-btn {
            padding: 15px;
            border: 2px solid var(--cat-beige);
            border-radius: 15px;
            background: white;
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .reason-btn:hover {
            transform: translateY(-2px);
            border-color: var(--cat-pink);
        }
        
        .reason-btn.active {
            background: var(--cat-pink);
            color: white;
            border-color: var(--cat-pink);
        }
        
        /* å»ºè®®åˆ—è¡¨ */
        .suggestion-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin: 20px 0;
        }
        
        .suggestion-item {
            background: rgba(255, 245, 230, 0.5);
            border-left: 5px solid var(--cat-orange);
            padding: 20px;
            border-radius: 15px;
            display: flex;
            align-items: center;
            gap: 15px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .suggestion-item:hover {
            transform: translateX(5px);
            background: rgba(255, 182, 193, 0.1);
        }
        
        .step-number {
            background: var(--cat-orange);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            flex-shrink: 0;
        }
        
        /* å­¦ç§‘æ ‡ç­¾ */
        .subject-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            margin: 5px 5px 5px 0;
            font-weight: 600;
        }
        
        .math { background: #e3f2fd; color: #1565c0; }
        .physics { background: #f3e5f5; color: #7b1fa2; }
        .cs { background: #e8f5e9; color: #2e7d32; }
        .english { background: #fff3e0; color: #ef6c00; }
        .paper { background: #fce4ec; color: #c2185b; }
        .exam { background: #e0f7fa; color: #006064; }
        .daily { background: #f3e5f5; color: #7b1fa2; }
        .life { background: #e1bee7; color: #6a1b9a; }
        
        /* çŒ«çŒ«è¯­å½• */
        .cat-saying {
            background: white;
            border-radius: 20px;
            padding: 20px;
            margin: 20px 0;
            border: 2px dashed var(--cat-pink);
            position: relative;
        }
        
        .cat-saying::before {
            content: "ğŸ±";
            position: absolute;
            top: -15px;
            left: 20px;
            font-size: 2rem;
            background: white;
            padding: 0 10px;
        }
        
        /* ä¸“æ³¨æ—¶é•¿é€‰æ‹© */
        .duration-selector {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 20px 0;
        }
        
        .duration-btn {
            padding: 15px;
            border: 2px solid var(--cat-beige);
            border-radius: 15px;
            background: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
            cursor: pointer;
            transition: all 0.3s;
            flex: 1;
            min-width: 100px;
        }
        
        .duration-btn:hover {
            transform: translateY(-2px);
            border-color: var(--cat-orange);
        }
        
        .duration-btn.active {
            background: var(--cat-orange);
            color: white;
            border-color: var(--cat-orange);
        }
        
        .duration-time {
            font-size: 1.5rem;
            font-weight: bold;
        }
        
        .duration-label {
            font-size: 0.9rem;
        }
        
        /* ä¸“æ³¨æ¨¡å¼ */
        .focus-mode {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(255, 245, 230, 0.95) 0%, rgba(255, 240, 245, 0.95) 100%);
            z-index: 1000;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        .focus-timer {
            font-size: 4rem;
            font-weight: bold;
            color: var(--cat-orange);
            margin: 20px 0;
        }
        
        .focus-message {
            font-size: 1.5rem;
            color: var(--cat-brown);
            text-align: center;
            margin-bottom: 30px;
        }
        
        /* å†å²è®°å½• */
        .history-item {
            background: rgba(255, 245, 230, 0.5);
            border-left: 5px solid var(--cat-orange);
            padding: 15px;
            border-radius: 15px;
            margin-bottom: 10px;
        }
        
        .history-date {
            color: var(--cat-brown);
            font-size: 0.9rem;
            margin-bottom: 5px;
        }
        
        .history-task {
            color: var(--text-warm);
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .history-step {
            color: var(--text-warm);
            font-size: 0.9rem;
            margin-bottom: 5px;
        }
        
        .history-duration {
            color: var(--cat-orange);
            font-size: 0.9rem;
        }
        
        /* éšè— */
        .hidden {
            display: none;
        }
        
        /* å“åº”å¼ */
        @media (max-width: 480px) {
            h1 { font-size: 2rem; }
            .card { padding: 20px; }
            .cat-input { padding: 15px; }
            .cat-btn { padding: 15px 20px; font-size: 1.1rem; }
        }
    </style>
</head>
<body>
    <!-- æµ®åŠ¨å°çŒ« -->
    <div class="floating-cat cat-1">ğŸ˜º</div>
    <div class="floating-cat cat-2">ğŸ˜¸</div>
    <div class="floating-cat cat-3">ğŸ˜¹</div>
    <div class="floating-cat cat-4">ğŸ˜»</div>
    
    <!-- çŒ«çˆªå° -->
    <div class="paw-print" style="top: 15%; left: 20%;">ğŸ¾</div>
    <div class="paw-print" style="top: 40%; right: 25%;">ğŸ¾</div>
    <div class="paw-print" style="bottom: 30%; left: 25%;">ğŸ¾</div>
    <div class="paw-print" style="bottom: 10%; right: 20%;">ğŸ¾</div>

    <div class="container">
        <div class="header">
            <div class="cat-title">
                <span class="cat-icon">ğŸ </span>
                <h1>çŒ«çŒ«æ²»æ„ˆæ‰€</h1>
                <span class="cat-icon">ğŸ </span>
            </div>
            <p class="subtitle">æ—¥å¸¸çƒ¦æ¼ Ã— å­¦ä¸šå‹åŠ› Ã— ç”Ÿæ´»æŒ‘æˆ˜ï¼ŒçŒ«å’ªé™ªä½ ä¸€èµ·é¢å¯¹</p>
        </div>

        <!-- çŒ«çŒ«è¯­å½• -->
        <div class="cat-saying" id="catSaying">
            "å–µå‘œ~ ä»Šå¤©æœ‰ä»€ä¹ˆæƒ³å’Œæˆ‘èŠèŠçš„å—ï¼Ÿæ— è®ºæ˜¯ç”Ÿæ´»çäº‹è¿˜æ˜¯å­¦ä¸šéš¾é¢˜~"
        </div>

        <!-- ä¸»è¾“å…¥åŒº -->
        <div class="card" id="mainCard">
            <div class="card-title">
                <span>ğŸ”ï¸</span>
                <h3>å‘ç°ä½ çš„"çŸ³å¤´"</h3>
            </div>
            <p style="color: var(--cat-brown); margin-bottom: 15px;">
                å‘Šè¯‰æˆ‘ï¼Œä»Šå¤©æ˜¯ä»€ä¹ˆè®©ä½ æ„Ÿåˆ°å›°æ‰°å‘¢ï¼Ÿ<br>
                <small style="opacity: 0.7;">å¯ä»¥æ˜¯å­¦ä¸šã€å·¥ä½œã€ç”Ÿæ´»ï¼Œæˆ–ä»»ä½•å¿ƒäº‹~</small>
            </p>
            <textarea class="cat-input" id="taskInput" rows="3" placeholder="æ¯”å¦‚ï¼šé«˜æ•°ä½œä¸šå¥½éš¾ã€ä¸æƒ³èµ·åºŠã€è®ºæ–‡å†™ä¸å®Œã€æˆ¿é—´å¾ˆä¹±ã€æœ‰ç‚¹å­¤å•..."></textarea>
            <button class="cat-btn" id="startBtn">
                <span>ğŸ¾</span>
                å¬å”¤çŒ«å’ªå¸®å¸®å¿™
                <span>ğŸ¾</span>
            </button>
        </div>

        <!-- åŸå› é€‰æ‹© -->
        <div class="card hidden" id="reasonCard">
            <div class="card-title">
                <span>ğŸ’­</span>
                <h3>æ„Ÿå—ä½ çš„å¿ƒæƒ…</h3>
            </div>
            <p id="reasonText" style="color: var(--cat-brown); margin-bottom: 15px; min-height: 60px;">
                æˆ‘ç†è§£ä½ çš„æ„Ÿå—~ èƒ½å‘Šè¯‰æˆ‘ï¼Œä½ ç°åœ¨æ˜¯ä»€ä¹ˆæ„Ÿè§‰å—ï¼Ÿ
            </p>
            <div class="reason-selector" id="reasonSelector">
                <div class="reason-btn" data-reason="ç´¯">
                    <span>ğŸ˜´</span> æœ‰ç‚¹ç´¯
                </div>
                <div class="reason-btn" data-reason="çƒ¦">
                    <span>ğŸ˜®â€ğŸ’¨</span> æœ‰ç‚¹çƒ¦
                </div>
                <div class="reason-btn" data-reason="æ€•">
                    <span>ğŸ˜°</span> æœ‰ç‚¹æ€•
                </div>
                <div class="reason-btn" data-reason="æ²¡åŠ²">
                    <span>ğŸ¥±</span> æœ‰ç‚¹æ²¡åŠ²
                </div>
                <div class="reason-btn" data-reason="å­¤å•">
                    <span>ğŸ˜”</span> æœ‰ç‚¹å­¤å•
                </div>
                <div class="reason-btn" data-reason="è¿·èŒ«">
                    <span>ğŸ¤·â€â™€ï¸</span> æœ‰ç‚¹è¿·èŒ«
                </div>
            </div>
            <button class="cat-btn" id="nextBtn" style="margin-top: 20px;">
                <span>ğŸˆ</span>
                ç»§ç»­å‰è¿›
                <span>ğŸˆ</span>
            </button>
        </div>

        <!-- å»ºè®®åŒºåŸŸ -->
        <div class="card hidden" id="suggestionCard">
            <div class="card-title">
                <span>ğŸ¯</span>
                <h3>çŒ«å’ªçš„å°å»ºè®®</h3>
            </div>
            <p id="suggestionText" style="color: var(--cat-brown); margin-bottom: 15px;">
                æˆ‘ä»¬ä¸ç”¨ä¸€ä¸‹å­æ¬å¼€æ•´å—çŸ³å¤´ï¼Œå…ˆè¿ˆå‡ºä¸€å°æ­¥å°±å¥½å•¦~
            </p>
            
            <div class="suggestion-list" id="suggestionList">
                <!-- åŠ¨æ€ç”Ÿæˆå»ºè®® -->
            </div>
            
            <div style="margin-top: 20px;">
                <p style="color: var(--cat-brown); margin-bottom: 10px;">
                    æˆ–è€…ï¼Œä½ æƒ³è‡ªå·±å†³å®šç¬¬ä¸€æ­¥å—ï¼Ÿ
                </p>
                <input type="text" class="cat-input" id="customStep" placeholder="æ¯”å¦‚ï¼šå…ˆå–å£æ°´ã€å…ˆæ‰“å¼€è¯¾æœ¬ã€å…ˆæ•´ç†ä¹¦æ¡Œ..." style="margin-bottom: 10px;">
            </div>
            
            <button class="cat-btn btn-pink" id="chooseStepBtn">
                <span>âœ…</span>
                æˆ‘é€‰å¥½å•¦
            </button>
        </div>

        <!-- é€‰æ‹©æ˜¯å¦ä¸“æ³¨ -->
        <div class="card hidden" id="focusChoiceCard">
            <div class="card-title">
                <span>â±ï¸</span>
                <h3>è¦ä¸è¦ä¸“æ³¨ä¸€ä¼šå„¿ï¼Ÿ</h3>
            </div>
            <p id="focusChoiceText" style="color: var(--cat-brown); margin-bottom: 15px; min-height: 60px;">
                å¥½æ£’çš„é€‰æ‹©ï¼ç°åœ¨æƒ³è¯•è¯•ä¸“æ³¨ä¸€ä¼šå„¿å—ï¼Ÿ
            </p>
            
            <div style="display: flex; gap: 10px; margin-bottom: 20px;">
                <button class="cat-btn btn-pink" id="noFocusBtn">
                    <span>ğŸ±</span>
                    å…ˆä¸ä¸“æ³¨
                </button>
                <button class="cat-btn" id="yesFocusBtn">
                    <span>ğŸ¯</span>
                    å¼€å§‹ä¸“æ³¨
                </button>
            </div>
        </div>

        <!-- ä¸“æ³¨æ—¶é•¿é€‰æ‹© -->
        <div class="card hidden" id="durationCard">
            <div class="card-title">
                <span>â°</span>
                <h3>é€‰æ‹©ä¸“æ³¨æ—¶é•¿</h3>
            </div>
            <p style="color: var(--cat-brown); margin-bottom: 15px;">
                é€‰æ‹©ä¸€ä¸ªé€‚åˆä½ çš„ä¸“æ³¨æ—¶é•¿å§ï¼š
            </p>
            
            <div class="duration-selector" id="durationSelector">
                <div class="duration-btn" data-minutes="5">
                    <div class="duration-time">5åˆ†</div>
                    <div class="duration-label">è¯•è¯•çœ‹</div>
                </div>
                <div class="duration-btn" data-minutes="15">
                    <div class="duration-time">15åˆ†</div>
                    <div class="duration-label">å°ä¸“æ³¨</div>
                </div>
                <div class="duration-btn" data-minutes="25">
                    <div class="duration-time">25åˆ†</div>
                    <div class="duration-label">æ ‡å‡†ç•ªèŒ„</div>
                </div>
                <div class="duration-btn" data-minutes="45">
                    <div class="duration-time">45åˆ†</div>
                    <div class="duration-label">æ·±ä¸“æ³¨</div>
                </div>
                <div class="duration-btn" data-minutes="60">
                    <div class="duration-time">60åˆ†</div>
                    <div class="duration-label">æŒ‘æˆ˜ä¸€ä¸‹</div>
                </div>
            </div>
            
            <button class="cat-btn" id="startFocusBtn">
                <span>â–¶ï¸</span>
                å¼€å§‹ä¸“æ³¨
            </button>
        </div>

        <!-- å®Œæˆé¼“åŠ± -->
        <div class="card hidden" id="encouragementCard">
            <div class="card-title">
                <span>âœ¨</span>
                <h3>çŒ«å’ªä¸ºä½ éª„å‚²ï¼</h3>
            </div>
            <div style="text-align: center; padding: 20px 0;">
                <div style="font-size: 4rem; margin-bottom: 20px;">ğŸ±ğŸ†ğŸ¾</div>
                <p id="encouragementMessage" style="color: var(--cat-brown); font-size: 1.2rem; line-height: 1.5; min-height: 100px;">
                    ä½ åšåˆ°äº†ï¼è™½ç„¶åªæ˜¯ä¸€å°æ­¥ï¼Œä½†è¿™æ˜¯æœ€é‡è¦çš„ä¸€æ­¥å‘¢ï¼
                </p>
            </div>
            <button class="cat-btn btn-pink" id="startOverBtn">
                <span>ğŸ”„</span>
                ç»§ç»­æ²»æ„ˆä¹‹æ—…
            </button>
        </div>

        <!-- å†å²è®°å½• -->
        <div class="card" id="historyCard">
            <div class="card-title">
                <span>ğŸ“–</span>
                <h3>çŒ«å’ªçš„æ²»æ„ˆè®°å½•</h3>
            </div>
            <p style="color: var(--cat-brown); margin-bottom: 15px;">
                çœ‹çœ‹ä½ å’ŒçŒ«å’ªä¸€èµ·èµ°è¿‡çš„æ²»æ„ˆä¹‹è·¯ï¼š
            </p>
            <div id="historyList">
                <!-- å†å²è®°å½•ä¼šåŠ¨æ€ç”Ÿæˆ -->
            </div>
        </div>
        
        <!-- å…³äºæˆ‘ä»¬ -->
        <div class="card" style="text-align: center; background: rgba(255, 245, 230, 0.5);">
            <p style="color: var(--cat-brown); margin-bottom: 10px;">
                <small>ğŸ¾ çŒ«çŒ«æ²»æ„ˆæ‰€ ğŸ¾</small>
            </p>
            <p style="color: var(--text-warm); font-size: 0.9rem; opacity: 0.7;">
                ä¸€ä¸ªæ¸©æš–çš„è§’è½ï¼Œé™ªä½ é¢å¯¹ç”Ÿæ´»çš„å„ç§æŒ‘æˆ˜<br>
                å­¦ä¸šå‹åŠ› Ã— æ—¥å¸¸çƒ¦æ¼ Ã— æƒ…ç»ªè°ƒèŠ‚<br>
                å®Œå…¨å…è´¹ Â· ä¿æŠ¤éšç§ Â· éšæ—¶é™ªä¼´
            </p>
        </div>
    </div>

    <!-- ä¸“æ³¨æ¨¡å¼å¼¹çª— -->
    <div class="focus-mode" id="focusMode">
        <div style="text-align: center;">
            <div class="focus-timer" id="focusTimer">25:00</div>
            <div class="focus-message" id="focusMessage">æ·±å‘¼å¸ï¼Œæ…¢æ…¢åœ°å¼€å§‹</div>
            <button class="cat-btn btn-pink" id="endFocusBtn" style="width: 200px;">
                <span>â¸ï¸</span>
                ç»“æŸä¸“æ³¨
            </button>
        </div>
    </div>

    <script>
        // ============================================
        // ç®€åŒ–çš„æ ¸å¿ƒæ•°æ®åº“
        // ============================================
        
        // çŒ«çŒ«è¯­å½•åº“
        const catSayings = {
            start: [
                "å–µå‘œ~ ä»Šå¤©æœ‰ä»€ä¹ˆæƒ³å’Œæˆ‘èŠèŠçš„å—ï¼Ÿæ— è®ºæ˜¯ç”Ÿæ´»çäº‹è¿˜æ˜¯å­¦ä¸šéš¾é¢˜~",
                "è¹­è¹­~ çœ‹åˆ°ä½ å•¦ï¼æœ‰ä»€ä¹ˆå¿ƒäº‹å¯ä»¥å‘Šè¯‰æˆ‘å“¦~",
                "å’•å™œå’•å™œ~ æˆ‘åœ¨è¿™å„¿å‘¢ï¼Œæˆ‘ä»¬ä¸€èµ·é¢å¯¹å®ƒå¥½ä¸å¥½ï¼Ÿ",
                "å–µ~ ä¸ç®¡å¤šå¤§çš„çŸ³å¤´ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥ä¸€èµ·æ‹†æˆå°æ²™ç²’ï¼"
            ],
            during: [
                "çœŸæ£’ï¼ä½ å·²ç»å‹‡æ•¢åœ°è¯´å‡ºæ¥äº†~",
                "å’•å™œå™œ~ è¯´å‡ºæ¥å°±æ„Ÿè§‰è½»å¤šå•¦ï¼",
                "è¹­è¹­ä½ çš„æ‰‹~ æˆ‘åœ¨å¬å‘¢ï¼Œç»§ç»­è¯´ç»™æˆ‘å¬",
                "å–µ~ è¯´å‡ºæ¥å°±æ˜¯èƒœåˆ©çš„ç¬¬ä¸€æ­¥ï¼"
            ],
            end: [
                "ä½ åšåˆ°äº†ï¼è™½ç„¶åªæ˜¯ä¸€å°æ­¥ï¼Œä½†è¿™æ˜¯æœ€é‡è¦çš„ä¸€æ­¥å‘¢ï¼",
                "è¹­è¹­åº†ç¥~ ä»Šå¤©ä¹Ÿæˆ˜èƒœäº†è‡ªå·±ï¼ŒçœŸäº†ä¸èµ·ï¼",
                "å’•å™œå’•å™œ~ ä½ çœ‹ï¼Œä½ å·²ç»æ¯”åˆšæ‰æ›´å¼ºå¤§äº†ï¼",
                "å–µ~ æ¯æ¬¡çš„ä¸€å°æ­¥ï¼Œéƒ½ä¼šè®©æˆ‘ä»¬ç¦»æƒ³è¦çš„è‡ªå·±æ›´è¿‘ä¸€ç‚¹ï¼"
            ]
        };

        // å®‰æ…°è¯­åº“
        const comfortWords = {
            'ç´¯': [
                "ç´¯äº†å—ï¼Ÿè®©æˆ‘è¹­è¹­ä½ çš„æ‰‹å¿ƒï¼Œç»™ä½ ä¸€ç‚¹æ¸©æš–~",
                "ç´¯çš„æ—¶å€™ï¼Œå°±åƒå°çŒ«ä¸€æ ·èœ·ç¼©èµ·æ¥ä¼‘æ¯ä¸€ä¸‹å§~"
            ],
            'çƒ¦': [
                "çƒ¦çƒ¦çš„å‘€ï¼Ÿæˆ‘ä»¬æ¥ä¸€èµ·åšå‡ æ¬¡æ·±å‘¼å¸å§~",
                "å–µå‘œ~ çƒ¦çš„æ—¶å€™ï¼Œè®©æˆ‘é™ªä½ å®‰é™åœ°å¾…ä¸€ä¼šå„¿~"
            ],
            'æ€•': [
                "æ€•æ€•çš„ï¼Ÿæ¡ç´§æˆ‘çš„æ‰‹ï¼Œæˆ‘ä»¬ä¸€èµ·é¢å¯¹~",
                "å–µ~ å®³æ€•æ˜¯å‹‡æ•¢çš„å¼€å§‹ï¼Œä½ å·²ç»åœ¨é¢å¯¹å®ƒäº†~"
            ],
            'æ²¡åŠ²': [
                "æ²¡åŠ²å—ï¼Ÿæˆ‘ä»¬æ¥ç©ä¸ªå°æ¸¸æˆï¼Œæ‰¾ç‚¹ä¹è¶£~",
                "å–µ~ æ²¡åŠ²çš„æ—¶å€™ï¼Œè¯•è¯•çœ‹ç”¨ä¸ä¸€æ ·çš„æ–¹å¼åš~"
            ],
            'å­¤å•': [
                "å­¤å•äº†å—ï¼Ÿæˆ‘ä¸€ç›´éƒ½åœ¨è¿™é‡Œé™ªç€ä½ å“¦~",
                "å–µå‘œ~ å­¤å•çš„æ—¶å€™ï¼Œè®°å¾—æˆ‘åœ¨æƒ³ä½ ~"
            ],
            'è¿·èŒ«': [
                "è¿·èŒ«äº†å—ï¼Ÿè®©æˆ‘ä»¬æ…¢æ…¢æ¢ç´¢ï¼Œä¸æ€¥ç€æ‰¾ç­”æ¡ˆ~",
                "å–µ~ è¿·èŒ«æ˜¯æ¢ç´¢çš„å¼€å§‹ï¼Œæˆ‘ä»¬ä¸€èµ·æ‰¾æ–¹å‘~"
            ]
        };

        // æ¿€åŠ±è¯è¯­åº“
        const encouragementWords = {
            'é€‰æ‹©å': [
                "è¿™ä¸ªé€‰æ‹©çœŸæ£’ï¼ä½ å·²ç»è¿ˆå‡ºäº†æœ€é‡è¦çš„ä¸€æ­¥~",
                "å–µ~ å¥½é€‰æ‹©ï¼æˆ‘ä»¬æ…¢æ…¢æ¥ï¼Œä¸ç€æ€¥~"
            ],
            'ä¸ä¸“æ³¨': [
                "æ²¡å…³ç³»ï¼ä½ å·²ç»å‹‡æ•¢åœ°å¼€å§‹äº†ï¼Œè¿™æœ¬èº«å°±å¾ˆæ£’ï¼",
                "å–µ~ ä¸ä¸“æ³¨ä¹Ÿæ²¡å…³ç³»ï¼Œä½ å·²ç»å‘å‰è¿ˆäº†ä¸€æ­¥~"
            ],
            'ä¸“æ³¨å®Œæˆ': [
                "å¤ªæ£’äº†ï¼ä½ åšæŒå®Œæˆäº†ä¸“æ³¨ï¼Œæˆ‘ä¸ºä½ éª„å‚²ï¼",
                "å–µ~ ä¸“æ³¨å®Œæˆäº†ï¼ä½ åˆæˆ˜èƒœäº†è‡ªå·±ä¸€æ¬¡ï¼"
            ]
        };

        // ä¸“æ³¨æ¨¡å¼ä¸­çš„é¼“åŠ±è¯­
        const focusEncouragement = [
            "æ·±å‘¼å¸ï¼Œæ…¢æ…¢åœ°å¼€å§‹",
            "å–µ~ ä¸“æ³¨å½“ä¸‹ï¼Œå°±åƒå°çŒ«ä¸“æ³¨å°é±¼å¹²",
            "è¹­è¹­~ ä½ åœ¨è¿›æ­¥ï¼Œæˆ‘èƒ½æ„Ÿå—åˆ°"
        ];

        // æ™ºèƒ½æ‹†è§£å¼•æ“
        class CatHealingDecomposer {
            constructor() {
                this.taskDatabase = this.createCompleteDatabase();
            }
            
            createCompleteDatabase() {
                return {
                    // å­¦ä¸šç›¸å…³
                    'æ•°å­¦': this.createMathResponses(),
                    'é«˜æ•°': this.createMathResponses(),
                    'è®ºæ–‡': this.createPaperResponses(),
                    'ç¼–ç¨‹': this.createCSResponses(),
                    'ä»£ç ': this.createCSResponses(),
                    'è‹±è¯­': this.createEnglishResponses(),
                    'è€ƒè¯•': this.createExamResponses(),
                    'å¤ä¹ ': this.createExamResponses(),
                    
                    // æ—¥å¸¸ç”Ÿæ´»
                    'ä¸æƒ³èµ·åºŠ': this.createDailyResponses('èµ·åºŠ'),
                    'ä¸æƒ³åƒé¥­': this.createDailyResponses('åƒé¥­'),
                    'å¿ƒæƒ…ä¸å¥½': this.createDailyResponses('æƒ…ç»ª'),
                    'æˆ¿é—´å¾ˆä¹±': this.createDailyResponses('æ•´ç†'),
                    'æœ‰ç‚¹å­¤å•': this.createDailyResponses('ç¤¾äº¤'),
                    
                    // é»˜è®¤é€šç”¨
                    'default': this.createDefaultResponses()
                };
            }
            
            // å­¦ä¸šä¸“é¡¹å“åº”
            createPaperResponses() {
                return {
                    'ç´¯': ['æ‰“å¼€Wordï¼Œåªå†™ä¸‹æ ‡é¢˜å’Œåå­—', 'æœç´¢ä¸€ç¯‡æ–‡çŒ®ï¼Œåªçœ‹æ‘˜è¦', 'ç”»å‡ºè®ºæ–‡çš„ä¸‰çº§å¤§çº²'],
                    'çƒ¦': ['å…ˆå†™"è‡´è°¢"æ„Ÿè°¢çŒ«å’ª', 'ç”¨å½©ç¬”ç”»è®ºæ–‡ç»“æ„å›¾', 'æŒ‘æˆ˜25åˆ†é’Ÿå†™å®Œå¼•è¨€'],
                    'æ€•': ['æ–°å»º"è‰ç¨¿-å¯ä»¥å¾ˆä¹±"æ–‡æ¡£', 'åˆ—å‡º3ä¸ªæ ¸å¿ƒé—®é¢˜', 'åªå†™å‰5æ¡å‚è€ƒæ–‡çŒ®'],
                    'æ²¡åŠ²': ['æ¢åˆ°å›¾ä¹¦é¦†/å’–å•¡å…å†™', 'ç”¨LaTeXç­‰æ–°å·¥å…·', 'æ¯500å­—ç»™è‡ªå·±å¥–åŠ±'],
                    'å­¤å•': ['åŠ å…¥çº¿ä¸Šå­¦ä¹ ç¾¤', 'ç»™å¯¼å¸ˆå‘é‚®ä»¶è¯·æ•™', 'æƒ³è±¡è®ºæ–‡åœ¨å¸®åŠ©åˆ«äºº'],
                    'è¿·èŒ«': ['é‡è¯»å¯¼å¸ˆä¿®æ”¹æ„è§', 'ç”¨é¢œè‰²æ ‡è®°è¿›åº¦', 'åˆ¶å®š3å¤©å†™ä½œè®¡åˆ’']
                };
            }
            
            createMathResponses() {
                return {
                    'ç´¯': ['æŠ„å†™é¢˜ç›®å’Œå·²çŸ¥æ¡ä»¶', 'å¤ä¹ ç›¸å…³å…¬å¼', 'åšç¬¬1é¢˜çš„ç¬¬(1)å°é—®'],
                    'çƒ¦': ['ç”¨å½©ç¬”ç”»å›¾ç†è§£', 'å…ˆåšæœ€ç®€å•è®¡ç®—é¢˜', 'æ¯è§£ä¸€é¢˜ä¼‘æ¯5åˆ†é’Ÿ'],
                    'æ€•': ['åªè¯»é¢˜ï¼Œä¸æ±‚è§£', 'åˆ—å‡ºå¯èƒ½ç”¨åˆ°çš„å…¬å¼', 'ç”¨è®¡ç®—å™¨éªŒè¯ç®€å•æƒ…å†µ'],
                    'æ²¡åŠ²': ['ç”¨PythonéªŒè¯ç»“æœ', 'æŒ‘æˆ˜ä¸åŒè§£æ³•', 'æŠŠè¿‡ç¨‹è®²ç»™è™šæ‹ŸçŒ«å¬'],
                    'å­¤å•': ['æ‰¾åŒå­¦ç»„é˜Ÿå­¦ä¹ ', 'åœ¨è®ºå›æé—®å›ç­”', 'æƒ³è±¡è‡ªå·±æ˜¯æ•°å­¦ä¾¦æ¢'],
                    'è¿·èŒ«': ['ä»è¯¾æœ¬ä¾‹é¢˜æ¨¡ä»¿', 'ç”»çŸ¥è¯†å›¾è°±', 'å…ˆè·³éš¾é¢˜ä»ä¼šçš„å¼€å§‹']
                };
            }
            
            createCSResponses() {
                return {
                    'ç´¯': ['åˆ›å»ºé¡¹ç›®æ–‡ä»¶å¤¹', 'åªå†™mainå‡½æ•°æ¡†æ¶', 'è¿è¡ŒHello World'],
                    'çƒ¦': ['ç”¨æœ‰è¶£å˜é‡å‘½å', 'å…ˆå®ç°æœ€æœ‰è¶£åŠŸèƒ½', 'ç”¨è°ƒè¯•æ¨¡å¼ä¸€æ­¥æ­¥çœ‹'],
                    'æ€•': ['åªå†™ä¼ªä»£ç ', 'åœ¨çº¸ä¸Šç”»æµç¨‹å›¾', 'æœç´¢GitHubæºç å‚è€ƒ'],
                    'æ²¡åŠ²': ['å°è¯•ç”¨æ–°æ¡†æ¶é‡å†™', 'å‚åŠ LeetCodeæ¯æ—¥ä¸€é¢˜', 'æ·»åŠ æœ‰è¶£æ³¨é‡Š'],
                    'å­¤å•': ['åœ¨GitHubæ‰¾å¼€æºé¡¹ç›®', 'åŠ å…¥ç¼–ç¨‹ç¤¾ç¾¤', 'å°è¯•ç»“å¯¹ç¼–ç¨‹'],
                    'è¿·èŒ«': ['ç”¨printå¤§æ³•è°ƒè¯•', 'å…ˆå†™æµ‹è¯•ç”¨ä¾‹', 'åˆ†è§£ä¸ºå°å‡½æ•°']
                };
            }
            
            createEnglishResponses() {
                return {
                    'ç´¯': ['åªå¬1åˆ†é’Ÿè‹±è¯­', 'æŠ„å†™5ä¸ªå•è¯', 'çœ‹è‹±æ–‡æ­Œè¯'],
                    'çƒ¦': ['çœ‹ä¸€é›†è‹±å‰§ç¾å‰§', 'ç”¨è‹±è¯­å†™å¾…åŠæ¸…å•', 'ç©å•è¯å°æ¸¸æˆ'],
                    'æ€•': ['åªèƒŒ3ä¸ªæ ¸å¿ƒè¯', 'æœ—è¯»ç®€å•è¯¾æ–‡', 'å®Œæˆä¸€é“é€‰æ‹©é¢˜'],
                    'æ²¡åŠ²': ['ç”¨è‹±è¯­æè¿°æˆ¿é—´', 'ç»™è™šæ‹Ÿç¬”å‹å†™é‚®ä»¶', 'å”±è‹±æ–‡æ­Œ'],
                    'å­¤å•': ['åŠ å…¥è‹±è¯­è§’', 'ç”¨è‹±è¯­è‡ªè¨€è‡ªè¯­', 'æƒ³è±¡å’Œå¤–å›½çŒ«èŠå¤©'],
                    'è¿·èŒ«': ['åšçœŸé¢˜ä¸é™æ—¶', 'æ•´ç†é”™é¢˜æœ¬å‰5é¢˜', 'åˆ¶å®š7å¤©å­¦ä¹ è®¡åˆ’']
                };
            }
            
            createExamResponses() {
                return {
                    'ç´¯': ['æ•´ç†ä¹¦æ¡Œæ”¾ä¸€é—¨è¯¾èµ„æ–™', 'æµè§ˆç›®å½•äº†è§£èŒƒå›´', 'åˆ¶å®š1å°æ—¶å¤ä¹ è®¡åˆ’'],
                    'çƒ¦': ['ç”¨æ€ç»´å¯¼å›¾æ•´ç†ä¸€ç« ', 'åšå¾€å¹´çœŸé¢˜é€‰æ‹©é¢˜', 'å’ŒåŒå­¦äº’ç›¸æé—®'],
                    'æ€•': ['ä»æœ€ç®€å•æ¦‚å¿µå¼€å§‹', 'åˆ—å‡º3ä¸ªæœ€å¯èƒ½è€ƒç‚¹', 'å‡†å¤‡è€ƒè¯•ç‰©å“æ¸…å•'],
                    'æ²¡åŠ²': ['ç”¨ä¸åŒé¢œè‰²æ ‡è®°é‡ç‚¹', 'æŠŠçŸ¥è¯†ç¼–æˆæ•…äº‹', 'æ¨¡æ‹Ÿè€ƒè¯•ä¸è®¡åˆ†'],
                    'å­¤å•': ['æ‰¾å¤ä¹ æ­å­ä¸€èµ·', 'å‘è€å¸ˆè¯·æ•™é—®é¢˜', 'æƒ³è±¡è€ƒåçš„æ”¾æ¾'],
                    'è¿·èŒ«': ['åˆ†æå¾€å±Šè€ƒé¢˜åˆ†å¸ƒ', 'å…ˆå¤ä¹ æœ€æ“…é•¿ç§‘ç›®', 'æ¯å¤©å›ºå®šæ—¶é—´å¤ä¹ ']
                };
            }
            
            // æ—¥å¸¸ä¸“é¡¹å“åº”
            createDailyResponses(type) {
                const responses = {
                    'èµ·åºŠ': {
                        'ç´¯': ['å…ˆä¼¸æ‡’è…°åƒçŒ«ä¸€æ ·', 'æ…¢æ…¢ççœ¼çœ‹çª—å¤–å…‰', 'å¿ƒé‡Œé»˜æ•°5ä¸ªæ•°å­—'],
                        'çƒ¦': ['æ‰“å¼€å–œæ¬¢çš„éŸ³ä¹', 'æƒ³ä»Šå¤©çš„å°æƒŠå–œ', 'ç»™è‡ªå·±èµ·åºŠçš„ç†ç”±'],
                        'æ€•': ['æ·±å‘¼å¸ä¸‰æ¬¡æ„Ÿå—ç©ºæ°”', 'å‘Šè¯‰è‡ªå·±"åèµ·æ¥å°±å¥½"', 'æƒ³è±¡ä¼˜é›…åœ°èµ·èº«'],
                        'æ²¡åŠ²': ['æƒ³ä»Šå¤©ç¬¬ä¸€ä»¶æœŸå¾…äº‹', 'æ‹‰å¼€çª—å¸˜è®©é˜³å…‰è¿›æ¥', 'åšçŒ«å¼ä¼¸å±•'],
                        'å­¤å•': ['æƒ³è±¡ä¸€ç¾¤çŒ«åœ¨èº«è¾¹', 'è¯´"æ—©å®‰æˆ‘åœ¨è¿™é‡Œ"', 'å‘æ—©å®‰è¡¨æƒ…åŒ…'],
                        'è¿·èŒ«': ['æ„Ÿå—è¢«å­æŸ”è½¯æ¸©æš–', 'é—®"ä»Šå¤©æƒ³æˆä¸ºä»€ä¹ˆäºº"', 'å†™ä¸‹æƒ³åšçš„ä¸‰å°äº‹']
                    },
                    'åƒé¥­': {
                        'ç´¯': ['å–ä¸€å°å£æ¸©æ°´', 'é—»é£Ÿç‰©çš„é¦™æ°”', 'è¯´"åªå°ä¸€å£å°±å¥½"'],
                        'çƒ¦': ['ç‚¹ç‰¹åˆ«æƒ³åƒçš„', 'æ‘†æˆå¯çˆ±å½¢çŠ¶', 'è¾¹çœ‹è§†é¢‘è¾¹åƒ'],
                        'æ€•': ['ä»æœ€ç®€å•é£Ÿç‰©å¼€å§‹', 'è¯´"åƒä¸€ç‚¹è·èƒ½é‡"', 'æƒ³è±¡é£Ÿç‰©æ˜¯æ‹¥æŠ±'],
                        'æ²¡åŠ²': ['æ¢å–œæ¬¢çš„é¤å…·', 'æ”¾å–œæ¬¢çš„éŸ³ä¹', 'è¯•ä¸åŒå§¿åŠ¿åƒ'],
                        'å­¤å•': ['æƒ³è±¡çŒ«åœ¨é™ªåƒé¥­', 'ç»™é£Ÿç‰©æ‹ç…§åˆ†äº«', 'è¯´"æˆ‘åœ¨ç…§é¡¾è‡ªå·±"'],
                        'è¿·èŒ«': ['é—®èº«ä½“"æƒ³åƒä»€ä¹ˆ"', 'ä»é²œè‰³é£Ÿç‰©å¼€å§‹', 'æ…¢æ…¢ä¸“æ³¨åœ°å’€åš¼']
                    },
                    'æƒ…ç»ª': {
                        'ç´¯': ['å…ˆæ‰¾ä¸ªèˆ’æœçš„åœ°æ–¹è¶´ä¸‹', 'æ…¢æ…¢æ·±å‘¼å¸æ„Ÿå—ç©ºæ°”', 'è½»è½»æ‹æ‹è‡ªå·±è‚©è†€'],
                        'çƒ¦': ['æ‰¾ä»¶è½¯è½¯ä¸œè¥¿æŠ±ä¸€æŠ±', 'åœ¨çº¸ä¸Šä¹±æ¶‚ä¹±ç”»', 'è¯´"çƒ¦çƒ¦æ²¡å…³ç³»"'],
                        'æ€•': ['æ¡ä½è‡ªå·±çš„æ‰‹', 'åˆ—å‡º3ä»¶å®‰å…¨çš„äº‹', 'æƒ³è±¡è¢«å°çŒ«åŒ…å›´'],
                        'æ²¡åŠ²': ['åšä»¶å°å¿«ä¹çš„äº‹', 'æ¢ä¸ªç¯å¢ƒ', 'ç»™è‡ªå·±æ¸©æŸ”é¼“åŠ±'],
                        'å­¤å•': ['è¯´"å­¤å•æ—¶æˆ‘ä¹Ÿé™ªä½ "', 'ç»™æœ‹å‹å‘ä¸ªè¡¨æƒ…', 'æƒ³è±¡å°çŒ«è¹­ä½ è…¿'],
                        'è¿·èŒ«': ['å…è®¸è‡ªå·±å¾…ä¸€ä¼šå„¿', 'çœ‹çœ‹çª—å¤–äº‘', 'å†™ä¸‹æ­¤åˆ»æ„Ÿå—']
                    },
                    'æ•´ç†': {
                        'ç´¯': ['åªæ”¶æ‹¾å·´æŒå¤§åœ°æ–¹', 'æ‰“å¼€çª—æˆ·è®©ç©ºæ°”è¿›æ¥', 'è¯´"æ•´ç†ä¸€ç‚¹ç‚¹å¾ˆæ£’"'],
                        'çƒ¦': ['æ”¾å–œæ¬¢çš„éŸ³ä¹', 'ä»æœ€é¡ºçœ¼åœ°æ–¹å¼€å§‹', 'æ¯æ•´ç†ä¸€å°å—ç‚¹èµ'],
                        'æ€•': ['å…ˆæ‹"æ•´ç†å‰"ç…§ç‰‡', 'åªè®¾å®š5åˆ†é’Ÿæ•´ç†', 'æƒ³è±¡ç»™å°çŒ«æ”¶æ‹¾çª'],
                        'æ²¡åŠ²': ['æŒ‘æˆ˜"5åˆ†é’Ÿèƒ½æ•´ç†å¤šå°‘"', 'ç”¨ä¸åŒæ–¹å¼æ•´ç†', 'å®Œæˆåç»™è‡ªå·±å¥–åŠ±'],
                        'å­¤å•': ['æƒ³è±¡å°çŒ«å¸®ä½ æ•´ç†', 'å¼€è§†é¢‘å’Œæœ‹å‹ä¸€èµ·', 'è¯´"æˆ‘åœ¨åˆ›é€ æ¸©æš–çª"'],
                        'è¿·èŒ«': ['ä»æœ€è¿‘ç‰©å“å¼€å§‹', 'å…ˆåªæ•´ç†æ¡Œé¢', 'é—®"æœ€æƒ³è®©å“ªå˜æ•´æ´"']
                    },
                    'ç¤¾äº¤': {
                        'ç´¯': ['å¯¹è‡ªå·±è¯´"æˆ‘åœ¨"', 'åšä»¶æœ‰è¿æ¥çš„äº‹', 'æƒ³è±¡è¢«æ¸©æš–åŒ…å›´'],
                        'çƒ¦': ['åšä¸‰æ¬¡æ·±å‘¼å¸', 'æ¢ä¸ªè§’åº¦çœ‹', 'ç»™è‡ªå·±å†³å®šæƒ'],
                        'æ€•': ['ä»æœ€å°ä¸€æ­¥å¼€å§‹', 'åˆ—å‡ºæœ€åæƒ…å†µ', 'æƒ³è±¡æˆåŠŸçš„è‡ªå·±'],
                        'æ²¡åŠ²': ['è®¾å®šæœ‰è¶£æŒ‘æˆ˜', 'æ¢ä¸ªæ–¹å¼åš', 'å®Œæˆåå°åº†ç¥'],
                        'å­¤å•': ['è¯´"æˆ‘ä¸€ç›´éƒ½åœ¨"', 'åšæœ‰è¿æ¥çš„äº‹', 'æƒ³è±¡è¢«æ¸©æš–åŒ…å›´'],
                        'è¿·èŒ«': ['å…è®¸ä¸æ€¥æ‰¾ç­”æ¡ˆ', 'å†™ä¸‹æ‰€æœ‰å¯èƒ½æ€§', 'ç›¸ä¿¡ç­”æ¡ˆä¼šå‡ºç°']
                    }
                };
                
                return responses[type] || this.createDefaultResponses();
            }
            
            createDefaultResponses() {
                return {
                    'ç´¯': ['ä¼‘æ¯5åˆ†é’ŸåƒçŒ«æ‰“ç›¹', 'å–å£æ°´æ„Ÿå—æµåŠ¨', 'è¯´"ç´¯äº†å°±ä¼‘æ¯"'],
                    'çƒ¦': ['åšä¸‰æ¬¡æ·±å‘¼å¸', 'æ¢ä¸ªè§’åº¦çœ‹äº‹æƒ…', 'ç»™è‡ªå·±ä»»æ€§å†³å®šæƒ'],
                    'æ€•': ['ä»æœ€å°ä¸€æ­¥å¼€å§‹', 'åˆ—å‡ºæœ€åçš„æƒ…å†µ', 'æƒ³è±¡æˆåŠŸçš„è‡ªå·±'],
                    'æ²¡åŠ²': ['è®¾å®šæœ‰è¶£æŒ‘æˆ˜', 'æ¢ä¸ªæ–¹å¼åš', 'å®Œæˆåå°åº†ç¥'],
                    'å­¤å•': ['è¯´"æˆ‘ä¸€ç›´éƒ½åœ¨"', 'åšæœ‰è¿æ¥çš„äº‹', 'æƒ³è±¡è¢«æ¸©æš–åŒ…å›´'],
                    'è¿·èŒ«': ['å…è®¸ä¸æ€¥æ‰¾ç­”æ¡ˆ', 'å†™ä¸‹æ‰€æœ‰å¯èƒ½æ€§', 'ç›¸ä¿¡ç­”æ¡ˆä¼šå‡ºç°']
                };
            }
            
            getRandomComfort(reason) {
                const comforts = comfortWords[reason] || comfortWords['ç´¯'];
                return comforts[Math.floor(Math.random() * comforts.length)];
            }
            
            getRandomEncouragement(type) {
                const encouragements = encouragementWords[type] || encouragementWords['é€‰æ‹©å'];
                return encouragements[Math.floor(Math.random() * encouragements.length)];
            }
            
            getRandomFocusEncouragement() {
                return focusEncouragement[Math.floor(Math.random() * focusEncouragement.length)];
            }
            
            getRandomCatSaying(type = 'start') {
                const sayings = catSayings[type] || catSayings.start;
                return sayings[Math.floor(Math.random() * sayings.length)];
            }
            
            getWarmResponse(task, reason) {
                const lowerTask = task.toLowerCase();
                
                // å°è¯•è·å–ç‰¹å®šå“åº”
                for (const [key, data] of Object.entries(this.taskDatabase)) {
                    if (lowerTask.includes(key.toLowerCase())) {
                        if (data[reason]) {
                            return {
                                steps: data[reason],
                                type: 'specific'
                            };
                        }
                    }
                }
                
                // ä½¿ç”¨é»˜è®¤å“åº”
                return {
                    steps: this.taskDatabase.default[reason] || this.taskDatabase.default['ç´¯'],
                    type: 'general'
                };
            }
        }

        // ============================================
        // åº”ç”¨åˆå§‹åŒ–
        // ============================================
        
        const decomposer = new CatHealingDecomposer();
        
        // è·å–DOMå…ƒç´ 
        const taskInput = document.getElementById('taskInput');
        const startBtn = document.getElementById('startBtn');
        const mainCard = document.getElementById('mainCard');
        const reasonCard = document.getElementById('reasonCard');
        const reasonText = document.getElementById('reasonText');
        const reasonSelector = document.getElementById('reasonSelector');
        const nextBtn = document.getElementById('nextBtn');
        const suggestionCard = document.getElementById('suggestionCard');
        const suggestionText = document.getElementById('suggestionText');
        const suggestionList = document.getElementById('suggestionList');
        const customStep = document.getElementById('customStep');
        const chooseStepBtn = document.getElementById('chooseStepBtn');
        const focusChoiceCard = document.getElementById('focusChoiceCard');
        const focusChoiceText = document.getElementById('focusChoiceText');
        const noFocusBtn = document.getElementById('noFocusBtn');
        const yesFocusBtn = document.getElementById('yesFocusBtn');
        const durationCard = document.getElementById('durationCard');
        const durationSelector = document.getElementById('durationSelector');
        const startFocusBtn = document.getElementById('startFocusBtn');
        const encouragementCard = document.getElementById('encouragementCard');
        const encouragementMessage = document.getElementById('encouragementMessage');
        const startOverBtn = document.getElementById('startOverBtn');
        const focusMode = document.getElementById('focusMode');
        const focusTimer = document.getElementById('focusTimer');
        const focusMessage = document.getElementById('focusMessage');
        const endFocusBtn = document.getElementById('endFocusBtn');
        const historyList = document.getElementById('historyList');

        let currentTask = '';
        let currentReason = '';
        let currentSteps = [];
        let selectedStep = '';
        let selectedDuration = 25;
        let focusInterval = null;
        let remainingSeconds = 0;

        // åˆå§‹åŒ–çŒ«çŒ«è¯­å½•
        updateCatSaying('start');

        // æ›´æ–°çŒ«çŒ«è¯­å½•
        function updateCatSaying(type = 'start') {
            const saying = decomposer.getRandomCatSaying(type);
            document.getElementById('catSaying').textContent = `"${saying}"`;
        }

        // å¼€å§‹æŒ‰é’®
        startBtn.addEventListener('click', () => {
            currentTask = taskInput.value.trim();
            
            if (!currentTask) {
                alert('å–µ~ å¯ä»¥å‘Šè¯‰æˆ‘æ˜¯ä»€ä¹ˆåœ¨å›°æ‰°ä½ å—ï¼Ÿ');
                taskInput.focus();
                return;
            }
            
            mainCard.classList.add('hidden');
            reasonCard.classList.remove('hidden');
            updateCatSaying('during');
        });

        // é€‰æ‹©åŸå› 
        reasonSelector.addEventListener('click', (e) => {
            if (e.target.closest('.reason-btn')) {
                const btn = e.target.closest('.reason-btn');
                
                document.querySelectorAll('.reason-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentReason = btn.dataset.reason;
                
                const comfort = decomposer.getRandomComfort(currentReason);
                reasonText.textContent = comfort;
                
                const response = decomposer.getWarmResponse(currentTask, currentReason);
                currentSteps = response.steps;
            }
        });

        // ä¸‹ä¸€æ­¥æŒ‰é’®
        nextBtn.addEventListener('click', () => {
            if (!currentReason) {
                alert('å–µ~ é€‰ä¸€ä¸ªä½ ç°åœ¨æœ€çœŸå®çš„æ„Ÿå—å¥½å—ï¼Ÿ');
                return;
            }
            
            reasonCard.classList.add('hidden');
            suggestionCard.classList.remove('hidden');
            updateSuggestions(currentSteps);
        });

        // æ›´æ–°å»ºè®®åˆ—è¡¨
        function updateSuggestions(steps) {
            suggestionList.innerHTML = '';
            
            steps.forEach((step, index) => {
                const item = document.createElement('div');
                item.className = 'suggestion-item';
                item.innerHTML = `
                    <div class="step-number">${index + 1}</div>
                    <div class="suggestion-text">${step}</div>
                `;
                
                item.addEventListener('click', () => {
                    item.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        item.style.transform = 'scale(1)';
                        selectStep(step);
                    }, 150);
                });
                
                suggestionList.appendChild(item);
            });
        }

        // é€‰æ‹©è‡ªå®šä¹‰æ­¥éª¤
        chooseStepBtn.addEventListener('click', () => {
            const customStepValue = customStep.value.trim();
            
            if (customStepValue) {
                selectStep(customStepValue);
            } else {
                alert('å–µ~ å†™ä¸€å°æ­¥ä½ æƒ³åšçš„äº‹å§ï¼Œå¤šå°éƒ½å¯ä»¥ï¼');
            }
        });

        // é€‰æ‹©æ­¥éª¤
        function selectStep(step) {
            selectedStep = step;
            suggestionText.textContent = decomposer.getRandomEncouragement('é€‰æ‹©å');
            
            setTimeout(() => {
                suggestionCard.classList.add('hidden');
                focusChoiceCard.classList.remove('hidden');
                focusChoiceText.textContent = "å¥½æ£’çš„é€‰æ‹©ï¼ç°åœ¨æƒ³è¯•è¯•ä¸“æ³¨ä¸€ä¼šå„¿å—ï¼Ÿ";
            }, 500);
        }

        // ä¸é€‰æ‹©ä¸“æ³¨
        noFocusBtn.addEventListener('click', () => {
            focusChoiceCard.classList.add('hidden');
            const encouragement = decomposer.getRandomEncouragement('ä¸ä¸“æ³¨');
            encouragementMessage.textContent = `${encouragement}\n\nä½ é€‰æ‹©äº†ï¼š"${selectedStep}"`;
            
            // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
            saveToHistory(selectedStep, 0);
            
            encouragementCard.classList.remove('hidden');
            updateCatSaying('end');
        });

        // é€‰æ‹©ä¸“æ³¨
        yesFocusBtn.addEventListener('click', () => {
            focusChoiceCard.classList.add('hidden');
            durationCard.classList.remove('hidden');
        });

        // é€‰æ‹©ä¸“æ³¨æ—¶é•¿
        durationSelector.addEventListener('click', (e) => {
            if (e.target.closest('.duration-btn')) {
                const btn = e.target.closest('.duration-btn');
                
                document.querySelectorAll('.duration-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                selectedDuration = parseInt(btn.dataset.minutes);
            }
        });

        // å¼€å§‹ä¸“æ³¨
        startFocusBtn.addEventListener('click', () => {
            if (!selectedDuration) {
                alert('å–µ~ è¯·é€‰æ‹©ä¸€ä¸ªä¸“æ³¨æ—¶é•¿~');
                return;
            }
            
            durationCard.classList.add('hidden');
            startFocusMode(selectedDuration);
        });

        // å¼€å§‹ä¸“æ³¨æ¨¡å¼
        function startFocusMode(minutes) {
            remainingSeconds = minutes * 60;
            focusMessage.textContent = decomposer.getRandomFocusEncouragement();
            updateFocusTimer();
            focusMode.style.display = 'flex';
            
            focusInterval = setInterval(() => {
                remainingSeconds--;
                updateFocusTimer();
                
                if (remainingSeconds % 30 === 0) {
                    focusMessage.textContent = decomposer.getRandomFocusEncouragement();
                }
                
                if (remainingSeconds <= 0) {
                    completeFocus();
                }
            }, 1000);
        }

        // æ›´æ–°ä¸“æ³¨è®¡æ—¶å™¨
        function updateFocusTimer() {
            const minutes = Math.floor(remainingSeconds / 60);
            const seconds = remainingSeconds % 60;
            focusTimer.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        // ç»“æŸä¸“æ³¨
        endFocusBtn.addEventListener('click', () => {
            clearInterval(focusInterval);
            focusMode.style.display = 'none';
            
            const encouragement = decomposer.getRandomEncouragement('ä¸“æ³¨å®Œæˆ');
            encouragementMessage.textContent = `${encouragement}\n\nä½ é€‰æ‹©äº†ï¼š"${selectedStep}"\nä¸“æ³¨äº†ï¼š${selectedDuration} åˆ†é’Ÿ`;
            
            // ä¿å­˜åˆ°å†å²
            saveToHistory(selectedStep, selectedDuration);
            
            encouragementCard.classList.remove('hidden');
            updateCatSaying('end');
        });

        // ä¸“æ³¨å®Œæˆ
        function completeFocus() {
            clearInterval(focusInterval);
            focusMode.style.display = 'none';
            
            const encouragement = decomposer.getRandomEncouragement('ä¸“æ³¨å®Œæˆ');
            encouragementMessage.textContent = `${encouragement}\n\nä½ é€‰æ‹©äº†ï¼š"${selectedStep}"\nä¸“æ³¨äº†ï¼š${selectedDuration} åˆ†é’Ÿ`;
            
            // ä¿å­˜åˆ°å†å²
            saveToHistory(selectedStep, selectedDuration);
            
            encouragementCard.classList.remove('hidden');
            updateCatSaying('end');
        }

        // ä¿å­˜åˆ°å†å²è®°å½•
        function saveToHistory(step, duration) {
            const history = JSON.parse(localStorage.getItem('catHistory') || '[]');
            const now = new Date();
            const dateStr = `${now.getMonth()+1}æœˆ${now.getDate()}æ—¥ ${now.getHours()}:${now.getMinutes().toString().padStart(2, '0')}`;
            
            history.unshift({
                date: dateStr,
                task: currentTask,
                step: step,
                duration: duration
            });
            
            if (history.length > 20) {
                history.length = 20;
            }
            
            localStorage.setItem('catHistory', JSON.stringify(history));
            updateHistoryDisplay();
        }

        // æ›´æ–°å†å²è®°å½•æ˜¾ç¤º
        function updateHistoryDisplay() {
            const history = JSON.parse(localStorage.getItem('catHistory') || '[]');
            
            if (history.length === 0) {
                historyList.innerHTML = '<p style="color: var(--cat-brown); text-align: center;">è¿˜æ²¡æœ‰è®°å½•å‘¢ï¼Œå¼€å§‹ç¬¬ä¸€æ¬¡æ²»æ„ˆä¹‹æ—…å§~</p>';
                return;
            }
            
            let html = '';
            history.forEach(item => {
                html += `
                    <div class="history-item">
                        <div class="history-date">${item.date}</div>
                        <div class="history-task">${item.task}</div>
                        <div class="history-step">ç¬¬ä¸€æ­¥ï¼š${item.step}</div>
                        <div class="history-duration">${item.duration ? 'ä¸“æ³¨äº† ' + item.duration + ' åˆ†é’Ÿ' : 'å¼€å§‹äº†ç¬¬ä¸€æ­¥ï¼'}</div>
                    </div>
                `;
            });
            
            historyList.innerHTML = html;
        }

        // é‡æ–°å¼€å§‹
        startOverBtn.addEventListener('click', () => {
            resetAll();
        });

        // é‡ç½®æ‰€æœ‰çŠ¶æ€
        function resetAll() {
            taskInput.value = '';
            customStep.value = '';
            currentTask = '';
            currentReason = '';
            currentSteps = [];
            selectedStep = '';
            selectedDuration = 25;
            
            document.querySelectorAll('.reason-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.duration-btn').forEach(btn => btn.classList.remove('active'));
            
            encouragementCard.classList.add('hidden');
            mainCard.classList.remove('hidden');
            updateCatSaying('start');
        }

        // é¡µé¢åŠ è½½æ—¶æ›´æ–°å†å²è®°å½•
        window.addEventListener('DOMContentLoaded', () => {
            updateHistoryDisplay();
        });

        // å®šæ—¶æ›´æ–°çŒ«çŒ«è¯­å½•
        setInterval(() => {
            updateCatSaying(['start', 'during', 'end'][Math.floor(Math.random() * 3)]);
        }, 20000);
    </script>
</body>
</html>